# 健康管理小程序

## 项目概述
这是一个基于微信小程序平台开发的健康管理应用，旨在帮助用户追踪日常健康数据、运动记录和冥想活动，提供全方位的健康管理解决方案。

## 功能模块

### 1. 首页/健康中心
- 用户健康数据概览（步数、心率等）
- 今日任务提醒
- 健康趋势图表展示

### 2. 运动中心
- 运动数据统计
- 运动类型选择（跑步、骑行、瑜伽等）
- 运动记录查看
- 运动目标设置

### 3. 冥想空间
- 冥想课程推荐
- 课程分类（助眠、专注等）
- 课程播放功能
- 冥想记录追踪

### 4. 健康分析
- 健康评分展示
- 数据趋势分析
- 个性化健康建议
- 周期性健康报告

### 5. 个人中心
- 用户信息管理
- 健康档案维护
- 成就系统
- 系统设置

## 技术架构

### 开发框架与工具
- 微信小程序原生开发框架
- Vant Weapp UI组件库
- 微信开发者工具

### 项目结构
```
healthmanager/
├── app.js                # 应用入口文件
├── app.json              # 全局配置文件
├── app.wxss             # 全局样式文件
├── project.config.json  # 项目配置文件
├── pages/               # 页面文件夹
│   ├── index/          # 首页
│   ├── sport/          # 运动中心
│   ├── meditation/     # 冥想空间
│   ├── analysis/       # 健康分析
│   └── profile/        # 个人中心
├── components/         # 自定义组件
├── utils/             # 工具函数
├── services/          # 服务层
├── assets/           # 静态资源
└── style/            # 公共样式
```

### 技术特点
1. 数据管理
   - 使用云开发（CloudBase）存储用户数据
   - 本地缓存处理临时数据
   - GlobalData管理全局状态

2. 性能优化
   - 分包加载
   - 图片资源压缩
   - 延迟加载
   - 数据预加载

3. 安全性
   - 数据加密传输
   - 敏感信息云端处理
   - 用户授权管理

## 开发规范

### 命名规范
- 文件夹：小写字母，多词以连字符连接
- 文件名：小写字母，多词以连字符连接
- 组件名：大驼峰命名
- 变量名：小驼峰命名
- 常量名：大写字母，下划线连接

### 代码风格
- 使用ES6+语法
- 遵循微信小程序开发规范
- 代码注释完善
- 模块化开发

## 部署说明
1. 克隆项目代码
2. 安装依赖：`npm install`
3. 使用微信开发者工具打开项目
4. 配置AppID
5. 开通云开发环境
6. 部署云函数
7. 上传静态资源

## 版本历史
- v1.0.0：基础功能开发
  - 实现五大核心模块
  - 基础数据管理
  - UI界面开发

## 贡献指南
1. Fork 项目
2. 创建特性分支
3. 提交变更
4. 推送到分支
5. 创建Pull Request

## 开源协议
MIT License 

## 页面头部组件使用指南

为了确保所有页面的内容与微信小程序右上角的胶囊按钮顶部精确对齐，我们创建了一个通用的页面头部组件。以下是使用方法：

### 1. 在页面的WXML中添加组件

```html
<page-header 
  title="页面标题" 
  showBack="{{true}}" 
  bind:heightChange="onHeaderHeightChange">
</page-header>

<view class="container" style="padding-top: {{contentTop}}px;">
  <!-- 页面内容 -->
</view>
```

参数说明：
- `title`: 页面标题
- `showBack`: 是否显示返回按钮，首页设为false，其他页面设为true
- `bind:heightChange`: 监听头部高度变化的事件

### 2. 在页面的JS中添加处理方法

```javascript
Page({
  data: {
    headerHeight: 0,
    contentTop: 0
    // 其他数据...
  },
  
  // 处理头部高度变化
  onHeaderHeightChange(e) {
    this.setData({
      headerHeight: e.detail.height,
      contentTop: e.detail.contentTop
    });
  }
  
  // 其他方法...
})
```

### 3. 确保页面的JSON配置使用自定义导航栏

```json
{
  "navigationStyle": "custom",
  "usingComponents": {}
}
```

### 4. 调整页面容器样式

为了确保页面内容与胶囊按钮顶部精确对齐，使用动态样式：

```html
<view class="container" style="padding-top: {{contentTop}}px;">
  <!-- 页面内容 -->
</view>
```

这里的`contentTop`是由页面头部组件计算得出的，确保内容与胶囊按钮顶部对齐。

## 示例页面

我们提供了一个示例页面，展示如何使用页面头部组件：

- 路径：`pages/example/example`
- 可以在开发者工具中预览此页面，了解正确的实现方式

## 注意事项

1. 页面头部组件会自动获取胶囊按钮的位置信息，确保页面内容与之对齐
2. 组件内部已处理安全区域，适配不同机型
3. 返回按钮会自动处理返回逻辑，如果没有上一页则跳转到首页
4. 红色细线是调试辅助线，表示胶囊按钮的顶部位置，可以在正式版中移除 